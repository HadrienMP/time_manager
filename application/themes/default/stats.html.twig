{% extends _layout %}

{% block head %}
    <script type="text/javascript" src="/js/stats.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Year', 'Sales', 'Expenses'],
          ['2004',  1000,      400],
          ['2005',  1170,      460],
          ['2006',  660,       1120],
          ['2007',  1030,      540]
        ]);

        var options = {
          title: 'Company Performance',
          backgroundColor: { fill:'transparent' },
          hAxis: {textStyle: {color: '#FFF'}, baselineColor: '#FFF'},
          vAxis: {textStyle: {color: '#FFF'}},
          legend: {textStyle: {color: '#FFF'}},
          titleTextStyle: {color: '#FFF'}
        };

        var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
{% endblock %}

{% block content %}
<table class="stats">
	<thead>
		<tr>
			<th colspan="2">
				<p>Aujourd'hui</p>
			</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Temps Passé&nbsp;:</td>
			<td>{{stats.time_spent}}</td>
		</tr>
		<tr>
			<td>Temps Restant&nbsp;:</td>
			<td>{{stats.time_left}}</td>
		</tr>
		<tr>
			<td>Heure de fin&nbsp;:</td>
			<td>{{stats.end_time}}</td>
		</tr>
	</tbody>
	<thead class="small-bg">
		<tr>
			<th colspan="2">
				<p>Par période</p>
				<div>
					<a class="multi-button">Jour</a><!-- whitespace
				 --><a class="multi-button">Semaine</a><!-- whitespace
				 --><a class="multi-button active">Mois</a>
				</div>
			</th>
		</tr>
	</thead>
	
	{% for period_name, period in stats.periods %}
		<tbody class="{{ period_name }} period">
			<tr>
				<td>Heures sup&nbsp;:</td>
				<td>{{period.overtime}}</td>
			</tr>
			<tr>
				<td>Temps total passé&nbsp;:</td>
				<td>{{period.total_time_spent}}</td>
			</tr>
			<tr>
				<td>Jours travaillés&nbsp;:</td>
				<td>{{period.days_worked}}</td>
			</tr>
		</tbody>
	{% endfor %}
	
</table>

<p class="beveled-bg">Evolution des heures supplémentaires</p>
<div id="chart_div"></div>
{% endblock %}
